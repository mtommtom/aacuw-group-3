// v0.0.67 â€” Tue Jan 20 2026 13:15:08 GMT+0000 (Coordinated Universal Time)
var me=Object.defineProperty,ce=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var J=(r,e,t)=>e in r?me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>{for(var t in e||={})fe.call(e,t)&&J(r,t,e[t]);if(C)for(var t of C(e))pe.call(e,t)&&J(r,t,e[t]);return r},w=(r,e)=>ce(r,le(e));var R=(r,e,t)=>new Promise((i,n)=>{var o=m=>{try{a(t.next(m))}catch(l){n(l)}},s=m=>{try{a(t.throw(m))}catch(l){n(l)}},a=m=>m.done?i(m.value):Promise.resolve(m.value).then(o,s);a((t=t.apply(r,e)).next())});var ue=/bidder_debug=true/.test(window.location.href),W=["%cBidder Debug %cv0.0.67","color: #fff; background-color: #02224C; padding: 5px","color: #fff; background-color: #0054c2; padding: 5px"],d={debug(...r){ue&&console.log(...W,...r)},error(r){let{traceId:e=""}=r;console.error(...W,r),fetch(`https://rt.marphezis.com/client/logger${e?`?tid=${e}`:""}`,{method:"POST",body:JSON.stringify(b({version:"0.0.67"},r))})}};var N=["get_ad_template","render_ad","render_ad_syntax_error","ad_is_empty","body_element_is_not_ready","iframe_document_not_found","iframe_not_created"];function f(r){return d.error(r),{code:r.error_type,message:r.message}}function I(r){return new Promise(e=>setTimeout(()=>{e()},r*1e3))}var ge=["missed","onstart","amazon","amazon-req","amazon-res","viewability"],ye=["impression","served","rendered","confiant","viewability"],be={["impression"]:"timp",["served"]:"served",["rendered"]:"rendered",["missed"]:"mop",["onstart"]:"tracking/onstart",["confiant"]:"tblockad",["amazon"]:"timp",["amazon-req"]:"tracking/amazon/request",["amazon-res"]:"tracking/amazon/response",["viewability"]:"tracking/viewability"};var he=({isBasePixel:r,pixel:e,params:t})=>{let i=r?ge:ye,n=`${new URLSearchParams(b({},t)).toString()}`;return i.reduce((o,s)=>(o[s]=`https://rt.marphezis.com/${be[s]}?_bc=${e}${n?`&${n}`:""}`,o),{})};function _({pixels:r,pixel:e,isBasePixel:t=!1,hooks:i=[],params:n}){let o=i.reduce((a,m)=>{let[l,c]=m;return a[l]=a[l]||[],a[l].push(c),a},{}),s;return r?s=r:e&&(s=he({isBasePixel:t,pixel:e,params:n})),{send(a,m){try{if(s[a]){let l=r?"":`&${new URLSearchParams(w(b({},m),{ver:"0.0.67",cb:`${Math.floor(Math.random()*Date.now())}`})).toString()}`,c=`${s[a]}${l}`;if(navigator.sendBeacon&&!r)navigator.sendBeacon(c);else{let p=new Image;p.src=c}}o[a]&&o[a].forEach(l=>l())}catch(l){f({error_type:"pixel_send_error",message:`Pixel: ${a}, message: ${l.message}, params: ${JSON.stringify(m)}`,pixel:"-"})}},get(a){try{return o[a]&&o[a].forEach(m=>m()),s[a]?`${s[a]}&ver=0.0.67&cb=${Math.floor(Math.random()*Date.now())}`:void 0}catch(m){f({error_type:"pixel_get_error",message:`Pixel: ${a}, message: ${m.message}`,pixel:"-"})}}}}function v({width:r,height:e},t,i,n,o){try{let s=document.createElement("iframe");return s.width=`${r}`,s.height=`${e}`,s.style.border="none",s.id=`oms-ad-iframe-${n}`,s}catch(s){throw f({error_type:"iframe_not_created",message:s.message,dpid:t,pixel:i,traceId:o})}}function D(){var r;try{return(r=window.top)==null||r.document,!1}catch(e){return d.debug("In Safe Frame"),!0}}function A(r){let e=r.getBoundingClientRect(),t=e.left+e.width/2,i=e.top+e.height/2,n=document.elementFromPoint(t,i);return r===n||r.contains(n)}function F(r){let e=r.getBoundingClientRect(),t=window.innerWidth,i=window.innerHeight,n=Math.max(0,Math.min(e.right,t)-Math.max(e.left,0)),o=Math.max(0,Math.min(e.bottom,i)-Math.max(e.top,0));return n*o/(e.width*e.height)}var K=!1;function G(r,e,t){try{if(D())return;let i=.5,n=1e3,o=null,s=()=>{!K&&!o&&(o=setTimeout(()=>{e(),K=!0},n))},a=()=>{o&&(clearTimeout(o),o=null)};new IntersectionObserver(([c])=>{try{c.intersectionRatio>=i&&A(c.target)?s():a()}catch(p){f({error_type:"viewability_error",message:p.message,pixel:t})}},{threshold:[i]}).observe(r),F(r)>=i&&A(r)&&s()}catch(i){f({error_type:"viewability_error",message:i.message,pixel:t})}}function z(r,e,t,i,n,o){var a;if(n)n.appendChild(r);else{if(!window.document.body&&!window.document.documentElement)throw f({error_type:"body_element_is_not_ready",dpid:e,pixel:t,traceId:o});window.document.body?window.document.body.appendChild(r):window.document.documentElement.appendChild(r)}let s=(a=r.contentWindow)==null?void 0:a.document;if(s)return G(r,()=>{d.debug("Banner is viewable"),i()},t),s;throw f({error_type:"iframe_document_not_found",dpid:e,pixel:t,traceId:o})}var X=r=>{r.amazonEnabled&&(d.debug("Setup APS"),function(e,t,i,n,o,s,a){if(t[e])return;function m(l,c){t[e]._Q.push([l,c])}t[e]={init(){m("i",arguments)},fetchBids(){m("f",arguments)},setDisplayBids(){},targetingKeys(){return[]},_Q:[]},s=i.createElement(n),s.async=!0,s.src=o,a=i.getElementsByTagName(n)[0],a.parentNode.insertBefore(s,a)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"))},T=(r,e)=>R(void 0,null,function*(){let{publisher:t,domain:i,floor:n,size:o,settings:s,pixel:a,traceId:m}=e.bidderData;function l(){return new Promise(c=>{let p={slotID:t,slotName:i,sizes:[[o.width,o.height]]};n&&(p.floor={currency:"USD",value:Math.round(n*100)}),apstag.fetchBids({slots:[p],timeout:2e3},function(g){return R(this,null,function*(){if(g&&g.length>0){d.debug("Amazon bids received",g);let y=g[0];y.amznbid&&y.amzniid?c(y):(d.debug(`Amazon bid is missing required params: amznbid: ${y.amznbid}, amzniid: ${y.amzniid}`),c(null))}else d.debug("No Amazon bids"),c(null)})})})}try{d.debug("Init Amazon");let{send:c}=_({pixel:a,isBasePixel:!0,params:{tid:m}});apstag.init({pubID:"48266a61-b3d9-4cb7-b172-553abc6a42a4",schain:{complete:1,ver:"1.0",nodes:[{asi:"onlinemediasolutions.com",sid:t,hp:1}]}}),c("amazon-req",{dpid:"amazon"});let p=yield l();if(p){r||(yield I(s.timeout));let g=window.document.getElementById(`oms-ad-iframe-${e.slotId}`);g==null||g.remove(),c("amazon-res",{amznbid:p.amznbid,dpid:"amazon"}),g=v(o,"amazon",a,e.slotId);let y=z(g,"amazon",a,()=>c("viewability",{dpid:"amazon"}),e.parentNode);return d.debug("Render Amazon ad"),y.write(`<html lang="en">
					<body style="margin: 0; padding: 0; overflow: hidden;">
					</body>
				</html>
				`),y.close(),apstag.renderImp(y,p.amzniid),c("amazon",{amznbid:p.amznbid,dpid:"amazon"}),yield I(s.timeout),!0}return!1}catch(c){return N.includes(c==null?void 0:c.code)||f({error_type:"render_amazon_bid_error",message:c.message,pixel:a}),!1}});function Z(r,e){return R(this,null,function*(){var t;try{d.debug("Fetching initial Bidder Data for JS activity");let i={imp:{},device:{},user:{}};try{i.device.w=screen.width,i.device.h=screen.height;let o=[];D()||((t=window==null?void 0:window.top)==null?void 0:t.pbjs)&&window.top.pbjs.getUserIdsAsEids&&o.push(...window.top.pbjs.getUserIdsAsEids()),!o.length&&window.pbjs&&window.pbjs.getUserIdsAsEids&&o.push(...window.pbjs.getUserIdsAsEids()),i.user.eids=[...o],window.frameElement&&window.frameElement.id&&(i.imp.gpid=window.frameElement.id);try{let s=a=>Number.isInteger(a)?a:+a.toFixed(2);if(window.$sf&&window.$sf.ext&&window.$sf.ext.inViewPercentage)i.imp.viewability=s(window.$sf.ext.inViewPercentage()/100);else if(e){let a=F(e);i.imp.viewability=Number.isFinite(a)&&A(e)?s(a):-1}else i.imp.viewability=-1}catch(s){i.imp.viewability=-1}}catch(o){d.debug("JS Enrichment is failed",o)}let n=yield fetch(r,{method:"POST",body:JSON.stringify(i)});if(n.status===200)return n.json()}catch(i){d.debug("Failed to fetch initial Bidder Data for JS activity",i)}})}function ee(r,e,t,i){return d.debug("Normalize bids"),r.map((n,o)=>w(b({},n),{index:o,size:e,settings:t,isLastBid:r.length-1===o,loop:i}))}var Y=0;function we(r,e){let t=Math.floor(Math.random()*Date.now()),i=r.includes("?")?"&":"?",n=`${r}${i}_cb=${t}&reqn=${Y}&tid=${e}`;return++Y,n}function xe(r,e){return R(this,null,function*(){d.debug("Fetching Refresh Bidder Data");let t=yield fetch(we("https://rt.marphezis.com/refresh",e),{method:"POST",body:JSON.stringify(r),credentials:"include"});if(t.status===200)return t.json();if(t.status===250)return{stopRefresh:!0};if(t.status!==204)throw Error(`Status: ${t.status}`)})}function $(r,e=1){return R(this,null,function*(){var l,c,p,g;let{forceRefresh:t=!1,refreshBody:i,timeout:n,onError:o,onEmptyResponse:s,clientContext:a}=r,m;try{t||(d.debug(`Refresh Bidder Data after ${n*e} seconds`),yield I(n*e)),m=yield xe(w(b({},i),{timeoutMultiply:e}),(l=a==null?void 0:a.bidderData)==null?void 0:l.traceId)}catch(y){f({error_type:"fetch_refresh_error",message:y.message,pixel:(c=a.bidderData)==null?void 0:c.pixel}),o&&o()}if(!m){if(((g=(p=a.bidderData)==null?void 0:p.settings)==null?void 0:g.amazonEnabled)&&!t)return d.debug("Call Amazon after empty refresh"),(yield T(!0,a))||s(e),$(r,e+1);if(s(e),t)return}return m||$(r,e+1)})}var re=r=>new Promise(e=>{try{if(!r.confiantEnabled)return e();let t=()=>{var n;((n=window.confiant)==null?void 0:n.services)&&window.confiant.services().wrap!==void 0?(clearTimeout(i),e()):setTimeout(t,50)},i=setTimeout(()=>{d.debug("Confiant loading timeout reached"),e()},500);t()}catch(t){d.debug("Confiant init error",t),e()}}),te=(r,e)=>new Promise(t=>{var i;try{if(r.confiantEnabled&&r.confiantKey&&!((i=window.confiant)!=null&&i.services)){d.debug("Init Confiant"),window.confiant=window.confiant||{enable_integrations:"prebid:false,gpt:true,native:true",devMode:2};let n=document.createElement("script");n.src=`//confiant-integrations.global.ssl.fastly.net/${r.confiantKey}/gpt_and_prebid/config.js`,n.onload=()=>{clearTimeout(o),t()},n.onerror=()=>{clearTimeout(o),f({error_type:"confiant_load_error",pixel:e}),t()};let o=setTimeout(()=>{d.debug("Confiant script load timeout reached"),t()},500);window.document.body.appendChild(n)}else t()}catch(n){f({error_type:"confiant_load_error",message:n.message,pixel:e}),t()}}),ie=(r,{ad:e,dpid:t,size:i,settings:n,pixel:o},s)=>{let a={ad:e,bidder:t,size:`${i.width}x${i.height}`};if(t==="brightcom")return s();try{n.confiantKey&&window.confiant&&window.confiant.services&&window.confiant.services().wrap!==void 0?window.confiant.services().wrap(r,a,n.confiantKey,(m,l,c,p,g,y,L)=>{console.log("Ad was blocked by confiant:",JSON.stringify({blockingType:m,blockingId:l,isBlocked:c,propertyId:p,tagId:g,impressionData:y,wasRendered:L},null,4))}):(f({error_type:"confiant_obj_not_found",dpid:t,pixel:o}),s())}catch(m){f({error_type:"confiant_render_error",message:m.message,dpid:t,pixel:o}),s()}};function Re(r,e){let t=r;try{e.dpid!=="medianet-bcm"&&(t=decodeURIComponent(r))}catch(i){f({error_type:"decode_ad",dpid:e.dpid,message:i.message,pixel:e.pixel})}return t}function Ee(r){var n;let i=new DOMParser().parseFromString(r,"text/html").getElementsByTagName("script");try{for(let o of i)if(!o.type||o.type==="text/javascript"){let s=(n=o==null?void 0:o.textContent)==null?void 0:n.trim();new Function(s||"")}}catch(o){return{adValid:!1,message:o.message}}return{adValid:!0}}function Ie(r,e,t,i){try{return`<html lang="en">
				<body style="margin: 0; padding: 0; overflow: hidden;">
					<script id="oms-timp-pxl">
					    function sendPixel(pixel) { if (pixel) { if (navigator.sendBeacon) { navigator.sendBeacon(pixel); } else { const pixelImage = new Image(); pixelImage.src = pixel; }}}
						sendPixel("${r.ignoreImpressionPixel?"":e}")
					<\/script>
					${Re(r.ad,r)}
					${t?`<script> sendPixel("${t}") <\/script>`:""}
				</body>
			</html>
			`}catch(n){throw f({error_type:"get_ad_template",message:n.message,dpid:r.dpid,pixel:r.pixel,traceId:i})}}function ne(r,e,t,i){let{traceId:n}=i.bidderData;if(!e.ad)throw f({error_type:"ad_is_empty",dpid:e.dpid,pixel:e.pixel,traceId:n});let o=z(r,e.dpid,e.pixel,()=>t.send("viewability"),i.parentNode,n),s=t.get("impression"),a=t.get("rendered");if(s||f({error_type:"missed_imp_pixel",dpid:e.dpid,pixel:e.pixel,traceId:n}),o&&s){let m=Ie(e,s,a,n),{adValid:l,message:c}=Ee(m);if(!l)throw f({error_type:"render_ad_syntax_error",dpid:e.dpid,pixel:e.pixel,traceId:n,custom:e.ad,message:c});if(e.optionalPixels){let p=_({pixels:e.optionalPixels});p.get("nurl")&&p.send("nurl")}t.send("served");try{return e.settings.confiantEnabled?ie(o,w(b({},e),{ad:m}),()=>{o.write(m)}):o.write(m),!!o.getElementById("oms-timp-pxl")}catch(p){throw f({error_type:"render_ad",message:p.message,dpid:e.dpid,pixel:e.pixel,traceId:n})}}return!1}function E(r){try{let e=Math.floor(Math.random()*Date.now()),t=`https://rt.marphezis.com/${r}&cb=${e}`;if(navigator.sendBeacon)navigator.sendBeacon(t);else{let i=new Image;i.src=t}}catch(e){d.debug("Failed to send Client beacon",e)}}function k(){try{let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=r.length;if(crypto!=null&&crypto.getRandomValues){let i=new Uint8Array(15);return crypto.getRandomValues(i),Array.from(i,n=>r[n%e]).join("")}let t="";for(let i=0;i<15;i++)t+=r.charAt(Math.floor(Math.random()*e));return t}catch(r){d.debug("Failed to generate key",r)}}function V(){try{return window.top.performance.now()}catch(r){return d.debug("Top window performance is not allowed"),performance.now()}}var _e="undefined",oe=!1;function U(r,e=0){return R(this,null,function*(){try{if(!r.bidderData&&(r.queryURL||r.jsTagURL)&&e===0){let u=r.queryURL?`https://rt.marphezis.com/v2/js?${r.queryURL}`:r.jsTagURL,x=yield Z(`${u}&cb=${Math.floor(Math.random()*Date.now())}`,r.parentNode);if(x){if(x.settings.isFiltered){d.debug("Filtered: render filler");let{size:M,bids:q,traceId:h}=x,B=q[0],se=_({pixel:B.pixel,params:{dpid:B.dpid,tid:h}}),de=v(M,B.dpid,B.pixel,r.slotId,h),j=z(de,B.dpid,B.pixel,()=>se.send("viewability"),r.parentNode,h);j&&j.write(`<html lang="en"><body style="margin: 0; padding: 0; overflow: hidden;">${B.ad}</body></html>`);return}let S=new URLSearchParams(r.queryURL);return S.set("tid",x.traceId),ae(w(b({},r),{bidderData:x,queryURL:S.toString()}))}d.debug("No Bidder Data for JS activity"),r.queryURL&&E(`tracking/failed?${r.queryURL}&e=fetch_js_bd`);return}if(!r.bidderData){d.debug("Empty Bidder Data"),r.queryURL&&E(`tracking/failed?${r.queryURL}&e=empty_bd`);return}let t,{settings:i,pixel:n,size:o,refreshBody:s,traceId:a}=r.bidderData,{timeout:m}=i,{send:l}=_({pixel:n,isBasePixel:!0,params:{tid:a}});e===0&&(l("onstart"),oe=!0);let c=ee(r.bidderData.bids,o,i,e),{dpid:p}=r.bidderData.bids[0]||{},g=p==="brightcom";if(g&&e===0){d.debug("Immediately refresh bidder data");let u=yield $({forceRefresh:!0,refreshBody:b({},s),timeout:m,onEmptyResponse:x=>{d.debug("Missed opportunity"),l("missed",{tmul:`${x}`})},clientContext:r});if(u&&!u.stopRefresh)return U(w(b({},r),{bidderData:u}),e+1)}t=window.document.getElementById(`oms-ad-iframe-${r.slotId}`),t==null||t.remove();let y=Date.now();for(let u of c){let x=_({pixel:u.pixel,params:{dpid:u.dpid,tid:a}}),{isLastBid:S,index:M,loop:q}=u;try{d.debug(`Render ad ${M+1} loop ${q}`),t=v(o,u.dpid,u.pixel,r.slotId,a);let h=ne(t,u,x,r);h||(d.debug("Ad was not rendered"),t==null||t.remove(),u.settings.confiantEnabled&&x.send("confiant")),!S&&h&&(yield I(m),t==null||t.remove())}catch(h){t==null||t.remove(),N.includes(h==null?void 0:h.code)||f({error_type:"render_bid_error",message:h.message,dpid:u.dpid,pixel:u.pixel,traceId:a})}}i.amazonEnabled&&(yield T(g,r));let L=y+30*1e3-m*1e3,O=Date.now();if(O<L){let u=Math.round((L-O)/1e3);d.debug(`Wait for ${u} seconds to reach minimum ${30} seconds timeout before refresh request`),yield I(u)}let H=yield $({refreshBody:b({},s),timeout:m,onEmptyResponse:u=>{d.debug("Missed opportunity"),l("missed",{tmul:`${u}`})},clientContext:r});return H.stopRefresh?void 0:U(w(b({},r),{bidderData:H}),e+1)}catch(t){r.queryURL&&E(`tracking/failed?${r.queryURL}&e=run`),d.debug("Run failed:",t)}})}function ae(r){return R(this,null,function*(){try{let{bidderData:e}=r;if(!e)throw new Error("Empty bidder data");X(e.settings),yield te(e.settings,e.pixel),yield re(e.settings),U(r)}catch(e){r.queryURL&&E(`tracking/failed?${r.queryURL}&e=init`),d.debug("Init Client failed",e)}})}(function(){var t;let r=((t=window.__bidder_data)==null?void 0:t.traceId)||_e,e={bidderData:window.__bidder_data,queryURL:window.__query_url?`${window.__query_url}&tid=${r}`:void 0,jsTagURL:window.__js_tag_url};window.addEventListener("pagehide",()=>{!oe&&e.queryURL&&E(`tracking/failed?${e.queryURL}&e=left`)});try{e.queryURL&&E(`tracking/client_init?${e.queryURL}&tfpl=${V()}`);let i=document.currentScript;if(!i){let n=document.getElementsByTagName("script");i=n[n.length-1]}if((i==null?void 0:i.parentNode)instanceof HTMLElement){let n=i.parentNode;n.tagName.toUpperCase()!=="HEAD"&&(e.parentNode=n)}e.slotId=k(),e.bidderData?ae(e):e.queryURL||e.jsTagURL?U(e):(d.debug("Missed required vars to run Client"),e.queryURL&&E(`tracking/failed?${e.queryURL}&e=missed_req_params`))}catch(i){e.queryURL&&E(`tracking/failed?${e.queryURL}&e=onload`),d.debug("Onload failed",i)}})();
